//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//	File:			"CKeyState.h"
//	Author:			Nick Bucciarelli (NB)
//	Purpose:		Handles the key bindings
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#pragma once
#include "menuState.h"

class CKeyState : public menuState
{
protected:
	enum menuOptions { JUMP, MOVELEFT, MOVERIGHT, BACK, TOTAL };
	enum keybindingStates { KB_NULL, KB_BEGINCHECK, KB_WAITING, KBS};

	int foregroundID;
	float m_fTime, m_fXPer, m_fXLerp;

	int m_nJump;
	int m_nMoveLeft;
	int m_nMoveRight;
	
	char* m_szJump;
	char* m_szMoveLeft;
	char* m_szMoveRight;
	bool m_bIsHighlighted;
	bool IsPressed;

	unsigned state;
	unsigned character;
	unsigned oldhighlight;

	void menuHandler();

	CKeyState(void);
	CKeyState(const CKeyState&);
	CKeyState& operator=(const CKeyState&);
	virtual ~CKeyState(void);
public:

	//////////////////////////////////////////////////////////////////////////////////////////////////////
	//	Function:		"getInstance"
	//	Last Modified:	September 9th, 2008
	//	Purpose:		Gets the instance of the singleton
	//////////////////////////////////////////////////////////////////////////////////////////////////////
	static CKeyState* getInstance();

	//////////////////////////////////////////////////////////////////////////////////////////////////////
	//	Function:		"enter"
	//	Last Modified:	September 9th, 2008
	//	Purpose:		enters the main menu state
	//////////////////////////////////////////////////////////////////////////////////////////////////////
	void enter(void);

	//////////////////////////////////////////////////////////////////////////////////////////////////////
	//	Function:		"exit"
	//	Last Modified:	September 9th, 2008
	//	Purpose:		exits the main menu state
	//////////////////////////////////////////////////////////////////////////////////////////////////////
	void exit(void);

	bool input(float dt);

	//////////////////////////////////////////////////////////////////////////////////////////////////////
	//	Function:		"udpate"
	//	Last Modified:	September 9th, 2008
	//	Purpose:		updates the main menu state
	//////////////////////////////////////////////////////////////////////////////////////////////////////
	void update(float dt);

	//////////////////////////////////////////////////////////////////////////////////////////////////////
	//	Function:		"render"
	//	Last Modified:	September 9th, 2008
	//	Purpose:		renders the main menu state
	//////////////////////////////////////////////////////////////////////////////////////////////////////
	void render(void) const;

	//////////////////////////////////////////////////////////////////////////////////////////////////////
	//	Function:		"SetKeyString"
	//	Last Modified:	September 9th, 2008
	//	Purpose:		Sets the value in teh string to "Space", "F" etc.
	//////////////////////////////////////////////////////////////////////////////////////////////////////
	char* SetKeyString(unsigned int nKey);


	//////////////////////////////////////////////////////////////////////////
	//In the options DO THIS NICK!! ZOMG!!! 
	//////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////
	//MAKE AN ACCESSOR AND A SET!!!!;
	//////////////////////////////////////////////////////////////////////////
	//theInput->GetBufferedDIKCodeEx() = game::GetInstance()->GetKeys().m_nJump;
};